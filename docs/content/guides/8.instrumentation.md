In case if you are extending your contract with Alokai and you have joined us in 2025 or before, you may be required to install Alokai instrumentation as part of your storefront.

Here is a guide on how to do this, depending on your current situation.

# Storefront
::tabs{:titles='["Next.js App Router", "Nuxt 3", "Next.js Page Router", "Nuxt 2"]'}

#tab-1
If you use `@vue-storefront/next` newer or equal to `6.1.0`, then no action is required.

#tab-2
If you use `@vue-storefront/nuxt` newer or equal to `0.2.1`, then no action is required.

#tab-3
Go to `pages/_app.tsx


```diff
import { getHistoryTraceScript } from '@alokai/instrumentation/client';

...
  return (
    
    <SdkProvider>
+       <Script dangerouslySetInnerHTML={{ __html: getHistoryTraceScript() }} />
    ...
  </SdkProvider>
)
```

#tab-4


# Middleware
If you use `@alokai/connect` newer or equal to `1.1.0`, then no action is required.
Otherwise install the package `@todo/todo` 


```diff
+ import { installTraceServer } from '@vsf-enterprise/trace/server'


export const config = {
  location: 'name-of-your-integration-package',
  configuration: {
    ...
  },

  extensions: (extensions: ApiClientExtension[]) => [
    ...extensions,
+   {
+     name: 'trace',
+     extendApp({ app }) {
+       installTraceServer(app);
+     },
+   },
    unifiedApiExtension,
    cdnExtension,
    configSwitcherExtension,
  ],
} satisfies Integration<Config>;
```

# Verifying that it works
To verify that all works as intended, please contact our support.