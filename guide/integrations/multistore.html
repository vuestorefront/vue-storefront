<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Multistore Magento2 support | Vue Storefront</title>
    <meta name="description" content="Headless PWA for eCommerce">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.fdfb84c7.css" as="style"><link rel="preload" href="/assets/js/app.76d43c70.js" as="script"><link rel="preload" href="/assets/js/43.3a890629.js" as="script"><link rel="prefetch" href="/assets/js/10.cd9cbebb.js"><link rel="prefetch" href="/assets/js/11.1563466b.js"><link rel="prefetch" href="/assets/js/12.3551c657.js"><link rel="prefetch" href="/assets/js/13.030cdfc0.js"><link rel="prefetch" href="/assets/js/14.9ddbe990.js"><link rel="prefetch" href="/assets/js/15.42fb0c58.js"><link rel="prefetch" href="/assets/js/16.13a72e91.js"><link rel="prefetch" href="/assets/js/17.436bd902.js"><link rel="prefetch" href="/assets/js/18.dfe351c0.js"><link rel="prefetch" href="/assets/js/19.bed0ccef.js"><link rel="prefetch" href="/assets/js/2.50660496.js"><link rel="prefetch" href="/assets/js/20.3fe00257.js"><link rel="prefetch" href="/assets/js/21.8d7f8005.js"><link rel="prefetch" href="/assets/js/22.c8fda47e.js"><link rel="prefetch" href="/assets/js/23.f8901ef6.js"><link rel="prefetch" href="/assets/js/24.da9a41fa.js"><link rel="prefetch" href="/assets/js/25.4da0ee27.js"><link rel="prefetch" href="/assets/js/26.db4d7bc5.js"><link rel="prefetch" href="/assets/js/27.0cdfd376.js"><link rel="prefetch" href="/assets/js/28.9bf39ea4.js"><link rel="prefetch" href="/assets/js/29.a582b203.js"><link rel="prefetch" href="/assets/js/3.4b0d9954.js"><link rel="prefetch" href="/assets/js/30.da006d9a.js"><link rel="prefetch" href="/assets/js/31.bb84f19d.js"><link rel="prefetch" href="/assets/js/32.48f70fb5.js"><link rel="prefetch" href="/assets/js/33.42f48660.js"><link rel="prefetch" href="/assets/js/34.892472a6.js"><link rel="prefetch" href="/assets/js/35.f721fa58.js"><link rel="prefetch" href="/assets/js/36.f1ed6236.js"><link rel="prefetch" href="/assets/js/37.966aa529.js"><link rel="prefetch" href="/assets/js/38.6849fe0a.js"><link rel="prefetch" href="/assets/js/39.8ff1f101.js"><link rel="prefetch" href="/assets/js/4.da95283c.js"><link rel="prefetch" href="/assets/js/40.1485065c.js"><link rel="prefetch" href="/assets/js/41.7d0abb94.js"><link rel="prefetch" href="/assets/js/42.17511209.js"><link rel="prefetch" href="/assets/js/44.5f33530b.js"><link rel="prefetch" href="/assets/js/45.0b8abd12.js"><link rel="prefetch" href="/assets/js/46.ed0bc94f.js"><link rel="prefetch" href="/assets/js/47.594a997d.js"><link rel="prefetch" href="/assets/js/48.1d9f1863.js"><link rel="prefetch" href="/assets/js/49.e1cd863c.js"><link rel="prefetch" href="/assets/js/5.16e6c645.js"><link rel="prefetch" href="/assets/js/50.3539db71.js"><link rel="prefetch" href="/assets/js/51.41d40a26.js"><link rel="prefetch" href="/assets/js/52.66e4c1d4.js"><link rel="prefetch" href="/assets/js/53.6dd17bef.js"><link rel="prefetch" href="/assets/js/54.9df050c8.js"><link rel="prefetch" href="/assets/js/55.7252d9f7.js"><link rel="prefetch" href="/assets/js/56.3426d656.js"><link rel="prefetch" href="/assets/js/57.c7b8c269.js"><link rel="prefetch" href="/assets/js/58.0e702986.js"><link rel="prefetch" href="/assets/js/59.91bbe140.js"><link rel="prefetch" href="/assets/js/6.4aea3919.js"><link rel="prefetch" href="/assets/js/60.38d6087d.js"><link rel="prefetch" href="/assets/js/61.93a11efe.js"><link rel="prefetch" href="/assets/js/62.c70d760d.js"><link rel="prefetch" href="/assets/js/63.58531f78.js"><link rel="prefetch" href="/assets/js/7.9db11a60.js"><link rel="prefetch" href="/assets/js/8.7ccc5f92.js"><link rel="prefetch" href="/assets/js/9.b13b1e26.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fdfb84c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vue Storefront</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.youtube.com/channel/UCkm1F3Cglty3CE1QwKQUhhg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/the-vue-storefront-journal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/DivanteLtd/vue-storefront" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.youtube.com/channel/UCkm1F3Cglty3CE1QwKQUhhg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/the-vue-storefront-journal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/DivanteLtd/vue-storefront" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">About</a></li><li><a href="/guide/upgrade-notes/" class="sidebar-link">Upgrade notes</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/installation/linux-mac.html" class="sidebar-link">Installing on Linux/MacOS</a></li><li><a href="/guide/installation/windows.html" class="sidebar-link">Installing on Windows</a></li><li><a href="/guide/installation/magento.html" class="sidebar-link">Integration with Magento 2</a></li><li><a href="/guide/installation/production-setup.html" class="sidebar-link">Production setup</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/basics/project-structure.html" class="sidebar-link">Project structure</a></li><li><a href="/guide/basics/configuration.html" class="sidebar-link">Configuration file explained</a></li><li><a href="/guide/basics/contributing.html" class="sidebar-link">How to Contribute</a></li><li><a href="/guide/basics/feature-list.html" class="sidebar-link">Feature list</a></li><li><a href="/guide/basics/recipes.html" class="sidebar-link">FAQ and Recipes</a></li><li><a href="/guide/basics/typescript.html" class="sidebar-link">TypeScript Action Plan</a></li><li><a href="/guide/basics/graphql.html" class="sidebar-link">GraphQL Action Plan</a></li><li><a href="/guide/basics/ssr-cache.html" class="sidebar-link">SSR Cache</a></li><li><a href="/guide/basics/amp.html" class="sidebar-link">Google Advanced Mobile Pages</a></li><li><a href="/guide/basics/e2e.html" class="sidebar-link">E2E tests</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Core and themes</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/core-themes/themes.html" class="sidebar-link">Themes in Vue Storefront</a></li><li><a href="/guide/core-themes/layouts.html" class="sidebar-link">Layouts and advanced output operations</a></li><li><a href="/guide/core-themes/core-components.html" class="sidebar-link">Working with core components</a></li><li><a href="/guide/core-themes/ui-store.html" class="sidebar-link">Working with UI Store (Interface state)</a></li><li><a href="/guide/core-themes/translations.html" class="sidebar-link">Internationalization (i18n) of Vue Storefront</a></li><li><a href="/guide/core-themes/service-workers.html" class="sidebar-link">Working with Service Workers</a></li><li><a href="/guide/core-themes/webpack.html" class="sidebar-link">Working with Webpack</a></li><li><a href="/guide/core-themes/plugins.html" class="sidebar-link">Working with plugins</a></li><li><a href="/guide/core-themes/stylesheets.html" class="sidebar-link">Working with stylesheets in 'default' theme</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Components</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/components/home-page.html" class="sidebar-link">Core Home Page</a></li><li><a href="/guide/components/category-page.html" class="sidebar-link">Core Category Page</a></li><li><a href="/guide/components/product.html" class="sidebar-link">Core Product Page</a></li><li><a href="/guide/components/modal.html" class="sidebar-link">Modal component</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Data in Vue Storefront</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/data/data.html" class="sidebar-link">Working with data</a></li><li><a href="/guide/data/elasticsearch.html" class="sidebar-link">ElasticSearch data formats</a></li><li><a href="/guide/data/data-migrations.html" class="sidebar-link">Data Migrations for ElacticSearch</a></li><li><a href="/guide/data/elastic-queries.html" class="sidebar-link">ElasticSearch Queries</a></li><li><a href="/guide/data/database-tool.html" class="sidebar-link">Database tool</a></li><li><a href="/guide/data/entity-types.html" class="sidebar-link">Data Entity Types</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Extensions</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/extensions/extending-api.html" class="sidebar-link">Extending the API</a></li><li><a href="/guide/extensions/extending-server-side-routes.html" class="sidebar-link">Extending Express.js server side routes</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Working with Vuex</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/vuex/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/vuex/product-store.html" class="sidebar-link">Product Vuex Store</a></li><li><a href="/guide/vuex/category-store.html" class="sidebar-link">Category Vuex Store</a></li><li><a href="/guide/vuex/cart-store.html" class="sidebar-link">Cart Vuex Store</a></li><li><a href="/guide/vuex/checkout-store.html" class="sidebar-link">Checkout Vuex Store</a></li><li><a href="/guide/vuex/order-store.html" class="sidebar-link">Order Vuex Store</a></li><li><a href="/guide/vuex/stock-store.html" class="sidebar-link">Stock Vuex Store</a></li><li><a href="/guide/vuex/user-store.html" class="sidebar-link">User Vuex Store</a></li><li><a href="/guide/vuex/attribute-store.html" class="sidebar-link">Attribute Vuex Store</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Modules</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/modules/introduction.html" class="sidebar-link">Table of contents</a></li><li><a href="/guide/modules/cart.html" class="sidebar-link">Cart module</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Integrations</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/integrations/integrations.html" class="sidebar-link">Existing integrations</a></li><li><a href="/guide/integrations/reviews.html" class="sidebar-link">Product Reviews</a></li><li><a href="/guide/integrations/payment-gateway.html" class="sidebar-link">Payment Gateway Integration</a></li><li><a href="/guide/integrations/paypal-payments.html" class="sidebar-link">PayPal payments support</a></li><li><a href="/guide/integrations/direct-prices-sync.html" class="sidebar-link">Direct prices sync with Magento</a></li><li><a href="/guide/integrations/tier-prices-sync.html" class="sidebar-link">Tier prices sync with Magento</a></li><li><a href="/guide/integrations/totals-sync.html" class="sidebar-link">Totals and cart sync with Magento</a></li><li><a href="/guide/integrations/multistore.html" class="active sidebar-link">Multistore Magento2 support</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/integrations/multistore.html#multiwebsite-indexing" class="sidebar-link">Multiwebsite indexing</a></li><li class="sidebar-sub-header"><a href="/guide/integrations/multistore.html#vue-storefront-and-vue-storefront-api-configuration" class="sidebar-link">Vue Storefront and Vue Storefront Api configuration</a></li><li class="sidebar-sub-header"><a href="/guide/integrations/multistore.html#changing-the-ui-for-specific-store-views" class="sidebar-link">Changing the UI for specific store views</a></li><li class="sidebar-sub-header"><a href="/guide/integrations/multistore.html#localized-routes" class="sidebar-link">Localized routes</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="multistore-magento2-support"><a href="#multistore-magento2-support" aria-hidden="true" class="header-anchor">#</a> Multistore Magento2 support</h1> <p>Vue Storefront supports Magento Multistore installations</p> <h2 id="multiwebsite-indexing"><a href="#multiwebsite-indexing" aria-hidden="true" class="header-anchor">#</a> Multiwebsite indexing</h2> <p>Multiwebsite support starts with the ElasticSearch indexing. Basically - each store has it's own ElasticSearch index and should be populated separately using <a href="https://github.com/DivanteLtd/mage2vuestorefront" target="_blank" rel="noopener noreferrer">mage2vuestorefront<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> tool.</p> <p>The simplest script to index multi site:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">export</span> TIME_TO_EXIT<span class="token operator">=</span>2000
<span class="token function">export</span> MAGENTO_CONSUMER_KEY<span class="token operator">=</span>byv3730rhoulpopcq64don8ukb8lf2gq
<span class="token function">export</span> MAGENTO_CONSUMER_SECRET<span class="token operator">=</span>u9q4fcobv7vfx9td80oupa6uhexc27rb
<span class="token function">export</span> MAGENTO_ACCESS_TOKEN<span class="token operator">=</span>040xx3qy7s0j28o3q0exrfop579cy20m
<span class="token function">export</span> MAGENTO_ACCESS_TOKEN_SECRET<span class="token operator">=</span>7qunl3p505rubmr7u1ijt7odyialnih9

<span class="token keyword">echo</span> <span class="token string">'German store - de'</span>
<span class="token function">export</span> MAGENTO_URL<span class="token operator">=</span>http://demo-magento2.vuestorefront.io/rest/de
<span class="token function">export</span> INDEX_NAME<span class="token operator">=</span>vue_storefront_catalog_de

node --harmony cli.js categories --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js productcategories --partitions<span class="token operator">=</span>1
node --harmony cli.js attributes --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js taxrule --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js products --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true

<span class="token keyword">echo</span> <span class="token string">'Italian store - it'</span>
<span class="token function">export</span> MAGENTO_URL<span class="token operator">=</span>http://demo-magento2.vuestorefront.io/rest/it
<span class="token function">export</span> INDEX_NAME<span class="token operator">=</span>vue_storefront_catalog_it

node --harmony cli.js categories --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js productcategories --partitions<span class="token operator">=</span>1
node --harmony cli.js attributes --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js taxrule --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js products --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true

<span class="token keyword">echo</span> <span class="token string">'Default store - in our case United States / en'</span>
<span class="token function">export</span> MAGENTO_URL<span class="token operator">=</span>http://demo-magento2.vuestorefront.io/rest
<span class="token function">export</span> INDEX_NAME<span class="token operator">=</span>vue_storefront_catalog

node --harmony cli.js categories --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js productcategories --partitions<span class="token operator">=</span>1
node --harmony cli.js attributes --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js taxrule --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
node --harmony cli.js products --partitions<span class="token operator">=</span>1 --removeNonExistient<span class="token operator">=</span>true
</code></pre></div><p>As you may see it's just a <strong>it</strong> or <strong>de</strong> store code which is added to the base Magento2 REST API urls that makes the difference and then the <strong>INDEX_NAME</strong> set to the dedicated index name.</p> <p>In the result You should get:</p> <ul><li><em>vue_storefront_catalog_it</em> - populated with the &quot;it&quot; store data</li> <li><em>vue_storefront_catalog_de</em> - populated with the &quot;it&quot; store data</li> <li><em>vue_storefront_catalog</em> - populated with the &quot;default&quot; store data</li></ul> <p>Then, to use these indexes in the Vue Storefront You should index the database schema using the <code>vue-storefront-api</code> db tool:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run db rebuild -- --indexName<span class="token operator">=</span>vue_storefront_catalog_it
<span class="token function">npm</span> run db rebuild -- --indexName<span class="token operator">=</span>vue_storefront_catalog_de
<span class="token function">npm</span> run db rebuild -- --indexName<span class="token operator">=</span>vue_storefront_catalog
</code></pre></div><h2 id="vue-storefront-and-vue-storefront-api-configuration"><a href="#vue-storefront-and-vue-storefront-api-configuration" aria-hidden="true" class="header-anchor">#</a> Vue Storefront and Vue Storefront Api configuration</h2> <p>After this sequence of command You may add the available ES index to Your <code>vue-storefront-api/config/local.json</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">8080</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;esHost&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost:9200&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;esIndexes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;vue_storefront_catalog&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;vue_storefront_catalog_de&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;vue_storefront_catalog_it&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;availableStores&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;de&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;it&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

</code></pre></div><p>The last thing is to change the <code>vue-storefront/config/local.json</code> to configure the storeViews which are available.</p> <div class="language-json extra-class"><pre class="language-json"><code>    <span class="token property">&quot;storeViews&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;multistore&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;mapStoreUrlsFor&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;de&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;it&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;de&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;storeCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;de&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;storeId&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;German Store&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/de&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;elasticsearch&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost:8080/api/catalog&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue_storefront_catalog_de&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tax&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;defaultCountry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DE&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultRegion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;calculateServerSide&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;i18n&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;fullCountryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Germany&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;fullLanguageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;German&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultLanguage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DE&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultCountry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DE&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultLocale&quot;</span><span class="token operator">:</span> <span class="token string">&quot;de-DE&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;currencyCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;currencySign&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dateFormat&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HH:mm D-M-YYYY&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;it&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;storeCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;it&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;storeId&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Italian Store&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/it&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;elasticsearch&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost:8080/api/catalog&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue_storefront_catalog_it&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tax&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;defaultCountry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DE&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultRegion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;calculateServerSide&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;i18n&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;fullCountryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Italy&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;fullLanguageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Italian&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultCountry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IT&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultLanguage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IT&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultLocale&quot;</span><span class="token operator">:</span> <span class="token string">&quot;it-IT&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;currencyCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;currencySign&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EUR&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dateFormat&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HH:mm D-M-YYYY&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>After these changes you'll have a <code>LanguageSwitcher</code> component visible in the bottom.</p> <p>By default the language / store is switched by the URL prefix:</p> <ul><li><code>http://localhost:3000</code> is for the default store</li> <li><code>http://localhost:3000/it</code> will switch the store to the Italian one</li> <li><code>http://localhost:3000/de</code> will switch the store to the German one one</li></ul> <p>General URL format is:
<code>http://localhost:3000/{storeCode}</code></p> <p>The storeCode may be switched by ENV variable set before runing <code>npm run dev</code> / <code>npm start</code>:</p> <ul><li><code>export STORE_CODE=de &amp;&amp; npm run dev</code> will run the shop with the <code>de</code> shop loaded</li></ul> <p>Another option - usefull when using multistore mode with the nginx/varnish mode is to set the shop code by the <code>x-vs-store-code</code> http reqeuest header.</p> <h2 id="changing-the-ui-for-specific-store-views"><a href="#changing-the-ui-for-specific-store-views" aria-hidden="true" class="header-anchor">#</a> Changing the UI for specific store views</h2> <p>If you would like to modify the routes or change some particular components regarding the current locale (for example different Checkout in the German store) please take a look at: <code>src/themes/default/index.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> router<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// if youre' runing multistore setup this is copying the routed above adding the 'storeCode' prefix to the urls and the names of the routes</span>
  <span class="token comment">// You can do it on your own and then be able to customize the components used for example for German storeView checkout</span>
  <span class="token comment">// To do so please execlude the desired storeView from the config.storeViews.mapStoreUrlsFor and map the urls by Your own like:</span>
  <span class="token comment">// { name: 'de-checkout', path: '/checkout', component: CheckoutCustomized },</span>
  router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setupMultistoreRoutes</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  store<span class="token punctuation">.</span><span class="token function">registerModule</span><span class="token punctuation">(</span><span class="token string">'ui'</span><span class="token punctuation">,</span> UIStore<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Another option is to create a separate theme for specific storeview. Runtime theme changes are not possible as themes are compiled in the JS bundles by webpack during the page build process. In that case you should run separate instances of <code>vue-storefront</code> having the proper theme set in <code>config/local.json</code> file.</p> <h2 id="localized-routes"><a href="#localized-routes" aria-hidden="true" class="header-anchor">#</a> Localized routes</h2> <p>Route switching mechanism by default works on the URL level. Please use the <code>localizedRoute</code> mixin:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>localizedRoute(page.link)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cl-accent relative<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{
  page.title
}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>or</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span>
  <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>
    localizedRoute({
      name: product.type_id + <span class="token punctuation">'</span>-product<span class="token punctuation">'</span>,
      params: {
        parentSku: product.parentSku ? product.parentSku : product.sku,
        slug: product.slug,
        childSku: product.sku,
      },
    })
  <span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/DivanteLtd/vue-storefront/edit/master/docs/guide/integrations/multistore.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ‚Üê
        <a href="/guide/integrations/totals-sync.html" class="prev">
          Totals and cart sync with Magento
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/43.3a890629.js" defer></script><script src="/assets/js/app.76d43c70.js" defer></script>
  </body>
</html>
